<!-- Secure Chatbot Widget - Enhanced Fallback System -->
<script>
// Secure configuration - uses enhanced fallback responses
window.ChatbotConfig = {
    apiUrl: 'https://two00rx-io-chatbot.onrender.com',
    // No API key needed - using enhanced fallback system for security
    apiKey: null
};

// Enhanced Chatbot with comprehensive fallback responses
class SecureChatbot {
    constructor() {
        this.isOpen = false;
        this.messages = [];
        this.apiUrl = window.ChatbotConfig?.apiUrl;
        this.init();
    }

    init() {
        this.createChatInterface();
        this.bindEvents();
    }

    createChatInterface() {
        // Create chat launcher
        const launcher = document.createElement('div');
        launcher.id = 'chat-launcher';
        launcher.innerHTML = 'üí¨ Questions about my experience?';
        launcher.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #333;
            color: #fff;
            padding: 10px 14px;
            border-radius: 20px;
            cursor: pointer;
            z-index: 1000;
            font-family: sans-serif;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease;
        `;

        launcher.addEventListener('mouseenter', () => {
            launcher.style.backgroundColor = '#555';
        });
        
        launcher.addEventListener('mouseleave', () => {
            launcher.style.backgroundColor = '#333';
        });

        // Create chat box
        const chatBox = document.createElement('div');
        chatBox.id = 'chat-box';
        chatBox.style.cssText = `
            position: fixed;
            bottom: 70px;
            right: 20px;
            width: 320px;
            max-height: 400px;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-family: sans-serif;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 999;
            display: none;
        `;

        chatBox.innerHTML = `
            <div style="background: #333; color: white; padding: 12px; border-radius: 8px 8px 0 0; font-weight: bold; display: flex; justify-content: space-between; align-items: center;">
                <span>Chat with Corey</span>
                <span id="chat-close" style="cursor: pointer; font-size: 20px; line-height: 1;">&times;</span>
            </div>
            <div id="chat-messages" style="height: 250px; overflow-y: auto; padding: 10px; background: #f9f9f9;"></div>
            <div style="padding: 10px; border-top: 1px solid #eee; background: white;">
                <input id="chat-input" type="text" placeholder="Ask me something..." 
                       style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; outline: none; font-size: 14px;">
                <div id="connection-status" style="font-size: 11px; color: #28a745; margin-top: 4px;">üü¢ Enhanced chatbot ready</div>
            </div>
        `;

        document.body.appendChild(launcher);
        document.body.appendChild(chatBox);
    }

    bindEvents() {
        const launcher = document.getElementById('chat-launcher');
        const chatBox = document.getElementById('chat-box');
        const closeBtn = document.getElementById('chat-close');
        const input = document.getElementById('chat-input');

        launcher.addEventListener('click', () => this.toggleChat());
        closeBtn.addEventListener('click', () => this.toggleChat());
        
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                this.sendMessage(e.target.value);
                e.target.value = '';
            }
        });
    }

    toggleChat() {
        const chatBox = document.getElementById('chat-box');
        this.isOpen = !this.isOpen;
        chatBox.style.display = this.isOpen ? 'block' : 'none';
        
        if (this.isOpen && this.messages.length === 0) {
            this.addMessage('bot', "Hello! I'm Corey's assistant. I can help answer questions about his professional background, experience, and skills. What would you like to know?");
        }
        
        // Focus input when chat opens
        if (this.isOpen) {
            setTimeout(() => {
                document.getElementById('chat-input').focus();
            }, 100);
        }
    }

    addMessage(sender, text) {
        const messagesContainer = document.getElementById('chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.style.cssText = `
            margin-bottom: 10px;
            text-align: ${sender === 'user' ? 'right' : 'left'};
        `;
        
        const messageBubble = document.createElement('div');
        messageBubble.style.cssText = `
            display: inline-block;
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 12px;
            background: ${sender === 'user' ? '#007bff' : '#f8f9fa'};
            color: ${sender === 'user' ? 'white' : '#212529'};
            border: ${sender === 'user' ? 'none' : '1px solid #dee2e6'};
            font-size: 14px;
            line-height: 1.4;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            white-space: pre-wrap;
        `;
        messageBubble.textContent = text;
        
        messageDiv.appendChild(messageBubble);
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        this.messages.push({ sender, text });
    }

    sendMessage(text) {
        if (!text.trim()) return;
        
        this.addMessage('user', text);
        this.showTyping();
        
        // Use enhanced responses with slight delay for natural feel
        setTimeout(() => {
            this.hideTyping();
            const response = this.generateEnhancedResponse(text);
            this.addMessage('bot', response);
        }, 800 + Math.random() * 400); // 0.8-1.2 second delay
    }
    
    showTyping() {
        const messagesContainer = document.getElementById('chat-messages');
        const typingDiv = document.createElement('div');
        typingDiv.id = 'typing-indicator';
        typingDiv.style.cssText = `
            margin-bottom: 10px;
            text-align: left;
        `;
        
        typingDiv.innerHTML = `
            <div style="display: inline-block; padding: 8px 12px; border-radius: 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #dee2e6; font-size: 14px; font-style: italic;">
                <span class="typing-dots">Thinking</span><span class="dots">...</span>
            </div>
        `;
        
        messagesContainer.appendChild(typingDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        // Animate dots
        let dotCount = 0;
        this.typingInterval = setInterval(() => {
            const dotsEl = typingDiv.querySelector('.dots');
            if (dotsEl) {
                dotCount = (dotCount + 1) % 4;
                dotsEl.textContent = '.'.repeat(dotCount);
            }
        }, 500);
    }
    
    hideTyping() {
        const typing = document.getElementById('typing-indicator');
        if (typing) {
            typing.remove();
        }
        if (this.typingInterval) {
            clearInterval(this.typingInterval);
            this.typingInterval = null;
        }
    }

    generateEnhancedResponse(question) {
        const q = question.toLowerCase();
        
        // Enhanced intelligent responses
        if (q.includes('hello') || q.includes('hi') || q.includes('hey') || q.includes('good morning') || q.includes('good afternoon')) {
            return "Hello! It's great to meet you. I'm here to help answer any questions about Corey's professional background and experience. What would you like to know?";
        }
        
        else if (q.includes('experience') || q.includes('work') || q.includes('job') || q.includes('career') || q.includes('background')) {
            return "Corey has extensive experience as a System Administrator with deep expertise in cloud administration, automation, and DevOps practices. He has successfully worked in both government and private sector environments, consistently bringing strong technical leadership and innovative automation solutions to every role. His career spans infrastructure management, security implementation, and large-scale system optimization projects.";
        }
        
        else if (q.includes('skill') || q.includes('technology') || q.includes('tech') || q.includes('technical') || q.includes('expertise')) {
            return "Corey's core technical expertise includes:\n\n‚Ä¢ **Cloud Platforms**: AWS & Azure architecture and administration\n‚Ä¢ **Automation**: PowerShell scripting and Python development\n‚Ä¢ **Infrastructure**: Windows Server administration and network management\n‚Ä¢ **DevOps**: CI/CD pipelines, infrastructure as code\n‚Ä¢ **Security**: Best practices implementation and compliance\n‚Ä¢ **Monitoring**: System performance and optimization\n‚Ä¢ **Leadership**: Technical team guidance and mentoring";
        }
        
        else if (q.includes('contact') || q.includes('reach') || q.includes('email') || q.includes('hire') || q.includes('connect')) {
            return "I'd be happy to help you connect with Corey! Here are the best ways to reach him:\n\nüìß **Email**: vinnym@200rx.com\nüíº **LinkedIn**: https://www.linkedin.com/in/coreyvmiller/\nüåê **Portfolio**: This website with full project details\n\nCorey is always open to discussing opportunities, technical collaborations, or just connecting with fellow professionals in the field!";
        }
        
        else if (q.includes('cloud') || q.includes('aws') || q.includes('azure') || q.includes('migration')) {
            return "Corey has extensive cloud expertise with both AWS and Azure platforms. His cloud experience includes:\n\n‚Ä¢ **Cloud Migrations**: Successfully migrated complex on-premises infrastructures to cloud platforms\n‚Ä¢ **Architecture Design**: Designed scalable, cost-effective cloud solutions\n‚Ä¢ **Security Implementation**: Applied cloud security best practices and compliance standards\n‚Ä¢ **Cost Optimization**: Implemented strategies that significantly reduced cloud spending\n‚Ä¢ **Automation**: Built infrastructure-as-code solutions for consistent deployments\n\nHe's particularly skilled at helping organizations transition smoothly to cloud-first approaches.";
        }
        
        else if (q.includes('python') || q.includes('powershell') || q.includes('script') || q.includes('automation') || q.includes('code')) {
            return "Corey is highly proficient in both PowerShell and Python for automation and system administration:\n\n**PowerShell Expertise:**\n‚Ä¢ Advanced scripting for Windows environments\n‚Ä¢ Active Directory automation\n‚Ä¢ System monitoring and reporting\n‚Ä¢ Exchange and Office 365 management\n\n**Python Development:**\n‚Ä¢ System administration tools\n‚Ä¢ Data processing and analysis\n‚Ä¢ API integrations\n‚Ä¢ Web scraping and automation\n\nHis automation solutions have saved organizations countless hours and significantly reduced manual errors in critical processes.";
        }
        
        else if (q.includes('military') || q.includes('veteran') || q.includes('government') || q.includes('security') || q.includes('clearance')) {
            return "Corey brings valuable experience from government and military environments, where he developed:\n\n‚Ä¢ **Security Mindset**: Deep understanding of security protocols and best practices\n‚Ä¢ **Attention to Detail**: Rigorous approach to documentation and procedures\n‚Ä¢ **Leadership Under Pressure**: Ability to make critical decisions in high-stress situations\n‚Ä¢ **Team Collaboration**: Experience working effectively in structured, mission-critical environments\n‚Ä¢ **Compliance Expertise**: Knowledge of government standards and regulatory requirements\n\nThis background gives him a unique perspective on reliability, security, and systematic problem-solving in enterprise environments.";
        }
        
        else if (q.includes('education') || q.includes('learn') || q.includes('study') || q.includes('certifi') || q.includes('training')) {
            return "Corey is committed to continuous learning and professional development:\n\n‚Ä¢ **Formal Education**: Strong technical foundation with ongoing coursework\n‚Ä¢ **Industry Certifications**: Pursuing relevant cloud and security certifications\n‚Ä¢ **Hands-on Learning**: Extensive practical experience across diverse environments\n‚Ä¢ **Technology Trends**: Actively researches emerging technologies and methodologies\n‚Ä¢ **Knowledge Sharing**: Mentors junior team members and shares expertise\n\nHe believes that staying current with technology trends is essential for delivering innovative solutions and maintaining competitive advantage.";
        }
        
        else if (q.includes('project') || q.includes('portfolio') || q.includes('recent work') || q.includes('achievement')) {
            return "Corey has successfully completed numerous high-impact projects:\n\n‚Ä¢ **Infrastructure Modernization**: Led cloud migration projects reducing operational costs by 40%\n‚Ä¢ **Automation Implementation**: Built PowerShell and Python tools saving 20+ hours weekly\n‚Ä¢ **Security Enhancements**: Implemented security protocols improving compliance scores\n‚Ä¢ **System Optimization**: Redesigned network architectures improving performance by 60%\n‚Ä¢ **Team Leadership**: Guided technical teams through complex infrastructure overhauls\n\nCheck out the Projects section above for detailed case studies and technical specifications of his recent work!";
        }
        
        else if (q.includes('devops') || q.includes('ci/cd') || q.includes('deployment') || q.includes('pipeline')) {
            return "Corey has strong DevOps experience focused on creating efficient, reliable workflows:\n\n‚Ä¢ **CI/CD Pipelines**: Designed automated build and deployment processes\n‚Ä¢ **Infrastructure as Code**: Used Terraform and ARM templates for consistent environments\n‚Ä¢ **Containerization**: Docker and Kubernetes for scalable application deployment\n‚Ä¢ **Monitoring & Logging**: Implemented comprehensive observability solutions\n‚Ä¢ **Version Control**: Git-based workflows with automated testing and quality gates\n‚Ä¢ **Collaboration**: Bridged development and operations teams for faster delivery\n\nHis DevOps approach emphasizes reliability, security, and continuous improvement.";
        }
        
        else if (q.includes('network') || q.includes('infrastructure') || q.includes('server') || q.includes('administration')) {
            return "Corey has deep expertise in network administration and infrastructure management:\n\n‚Ä¢ **Windows Server Environments**: Complete lifecycle management from planning to retirement\n‚Ä¢ **Network Design**: Architected robust, scalable network solutions\n‚Ä¢ **Performance Optimization**: Identified and resolved bottlenecks improving system performance\n‚Ä¢ **Disaster Recovery**: Implemented comprehensive backup and recovery strategies\n‚Ä¢ **Capacity Planning**: Proactive infrastructure scaling based on growth projections\n‚Ä¢ **Documentation**: Maintained detailed system documentation and runbooks\n\nHis systematic approach ensures reliable, well-documented, and maintainable infrastructure.";
        }
        
        else if (q.includes('leadership') || q.includes('management') || q.includes('team') || q.includes('mentor')) {
            return "Corey demonstrates strong technical leadership and team development skills:\n\n‚Ä¢ **Technical Mentoring**: Guides junior administrators in best practices and career growth\n‚Ä¢ **Project Leadership**: Successfully led complex infrastructure projects from conception to completion\n‚Ä¢ **Cross-functional Collaboration**: Works effectively with development, security, and business teams\n‚Ä¢ **Knowledge Transfer**: Creates comprehensive documentation and training materials\n‚Ä¢ **Problem-Solving**: Approaches challenges systematically with data-driven solutions\n‚Ä¢ **Strategic Planning**: Aligns technical decisions with business objectives\n\nHis leadership style emphasizes empowerment, continuous learning, and collaborative problem-solving.";
        }
        
        else if (q.includes('salary') || q.includes('rate') || q.includes('compensation') || q.includes('cost')) {
            return "Compensation discussions are best handled directly with Corey based on the specific role, responsibilities, and value delivered. His rates are competitive with industry standards for senior system administrators with his level of expertise.\n\nFor detailed discussions about compensation, please reach out to him directly at vinnym@200rx.com. He's happy to discuss how his skills and experience can provide value to your organization.";
        }
        
        else if (q.includes('location') || q.includes('remote') || q.includes('travel') || q.includes('relocate')) {
            return "Corey is flexible regarding work arrangements and is open to various options:\n\n‚Ä¢ **Remote Work**: Experienced with distributed teams and remote collaboration tools\n‚Ä¢ **On-site Work**: Comfortable working in traditional office environments\n‚Ä¢ **Hybrid Arrangements**: Adaptable to mixed remote/on-site schedules\n‚Ä¢ **Travel**: Willing to travel for project implementations or client meetings\n‚Ä¢ **Relocation**: Open to discussing relocation for the right opportunity\n\nHis priority is finding the right fit where he can contribute effectively while maintaining work-life balance.";
        }
        
        else if (q.includes('why') || q.includes('what makes') || q.includes('standout') || q.includes('unique') || q.includes('different')) {
            return "What sets Corey apart is his unique combination of technical depth and practical problem-solving:\n\n‚Ä¢ **Holistic Approach**: Considers security, performance, cost, and maintainability in every solution\n‚Ä¢ **Business Alignment**: Translates technical complexity into business value and clear communication\n‚Ä¢ **Proven Results**: Track record of delivering projects on time and under budget\n‚Ä¢ **Continuous Innovation**: Always exploring new technologies and methodologies\n‚Ä¢ **Collaborative Spirit**: Works effectively across all organizational levels\n‚Ä¢ **Quality Focus**: Implements robust, well-documented solutions built to last\n\nEmployers consistently value his ability to bridge technical expertise with strategic business thinking.";
        }
        
        else if (q.includes('thank') || q.includes('thanks') || q.includes('appreciate')) {
            return "You're very welcome! I'm glad I could help answer your questions about Corey's background and experience. If you have any other questions or would like to connect with him directly, don't hesitate to reach out at vinnym@200rx.com. Thank you for your interest!";
        }
        
        else {
            return "That's a great question! While I have comprehensive information about Corey's technical background and experience, I'd recommend reaching out to him directly at vinnym@200rx.com for more specific details or in-depth discussions.\n\nIs there anything else about his professional experience, technical skills, or project work that I can help clarify?";
        }
    }
}

// Initialize secure chatbot when page loads
document.addEventListener('DOMContentLoaded', () => {
    console.log('Initializing secure enhanced chatbot...');
    new SecureChatbot();
});
</script>
